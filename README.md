專案管理
KNN 自動打磚塊
蔡政霖 0552029

需求：
我要用KNN訓練出可以打通三關的model，他可能有缺陷，但底線是10場過9場。KNN要過三關那規則(rule)要能順利打通三關，並且維持FPS在55，但別人電腦的規格跟我不一樣，處理速度不一樣會導致球漏接，所以限制於只能用我的筆電。
功能需求：
用KNN打贏三關
如果有時沒過，那每10場要能通過9場
效能規格：
FPS至少到達55
限用我的筆電


分析 – input ：
整體架構分為「訓練時期」和「遊玩時期」兩個區塊，遊玩時期是輸入場面資訊，電腦直接判斷該往哪走，18.2ms之內要完成判斷並且做出反應，輸入的資訊有：球的座標、板子的座標、方塊的數量，訓練時期是從過去遊玩的紀錄檔拿出同樣的資訊，但處理速度不設限。
Input : 
1.球的座標
2.板子的座標
3.方塊的數量


分析 – output：
遊玩時期要輸出板子的狀態給主程式，則訓練時期則是輸出訓練好的model
遊戲的紀錄檔是主程式輸出的，可以不用設計。
Output : 
遊玩時期：
1.板子狀態：左、右、不動
訓練時期：
	model : sav檔

分析 - 方法：
一開始先進入「遊玩時期」，我要先用rule base打通關遊戲，通關後進入「訓練時期」，把通關遊戲的存檔拿去給KNN訓練，檔案格式是pickle檔，訓練完在進入「遊玩時期」，把KNN訓練完的model拿去打遊戲，如果打不過就在修改rule base，因為會不止輸入1個pickle檔，所以也要選擇使用哪些pickle檔，如果有1、2關沒打過，那就把model打通關的pickle檔拿去訓練。

分析 – parameter：
從遊戲開始會出現第一個參數FPS，根據我使用的規則會出現rule base的參數，用KNN訓練那勢必會有KNN的參數，我額外使用了normalization，他有其參數，但我用默認值，所以可以忽略。
Parameter : 
遊戲參數：
1.FPS
Rule base :
1.移動方向判斷，落點距離板子中心的(可承受)距離
2.移動條件，距離擊球線的距離
3.移動條件，球是否在往下掉
KNN : 
1.K值


設計 – 架構圖 & FSM & data structure：
 

設計 – rule base：
  
設計 – KNN訓練 model：
 

設計 – KNN 辨識：
 










分析 - 可視化資料：
Ball x 對分類的影響
	 
Ball y 對分類的影響
	 

 
Ball u 對分類的影響
	 
Ball v 對分類的影響
	 

 
球與板子的x距離 對分類的影響
	 
球與板子的y距離 對分類的影響	 

 
板子座標 對分類的影響
	 
磚塊數量 對分類的影響	 

 
分析 – 資料可視化：
將每項特徵normalization 後 平方和後開根號，觀察其特徵分布是否符理想
 

分析 – 秘笈分享：
很難只用一個紀錄檔來做訓練
特徵選用有：球的座標、平板的座標、球的移動向量、球與平板的距離、方塊的數量(可能沒用)
Normalization 有一定程度的作用，但data(記錄檔)更重要
可以把通關的紀錄檔再拿去訓練，以達到破三關，但不是每個紀錄檔都適合去訓練
FPS太高例如90、100，電腦會反應不過來，導致game over
高FPS的model打不過低FPS的遊戲模式，低FPS的model也打不過高FPS的遊戲模式

To do list：
我要把輸入的檔案做些處理，現在的檔案有很多垃圾資訊，它會讓我的model發生誤判，首當其衝的是「把每個frame都抓進去訓練」，球有時候會在上面亂跑，那個階段對板子的移動毫無意義，那我訓練它完全是自找麻煩，所以我要將一些不必要的frame給去掉，或是如果球往上走，板子就自動回歸中心點。

